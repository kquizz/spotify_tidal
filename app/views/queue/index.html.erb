<div class="max-w-7xl mx-auto">
  <div class="text-center mb-12 fade-in">
    <h1 class="bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent">
      Job Queue Dashboard
    </h1>
    <p class="text-muted mt-3 text-lg">Monitor active processes and recent jobs</p>
  </div>

  <div class="mb-10 fade-in" style="animation-delay: 0.1s;">
    <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400">
        <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
        <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
      </svg>
      Active Processes
    </h2>
    <div class="card overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-white/10 bg-white/5">
              <th class="px-6 py-4 text-left font-semibold">Kind</th>
              <th class="px-6 py-4 text-left font-semibold">Name</th>
              <th class="px-6 py-4 text-left font-semibold">PID</th>
              <th class="px-6 py-4 text-left font-semibold">Last Heartbeat</th>
              <th class="px-6 py-4 text-left font-semibold">Supervisor</th>
            </tr>
          </thead>
          <tbody>
            <% @processes.each_with_index do |process, index| %>
              <tr class="border-b border-white/5 hover:bg-white/5 transition-colors" style="animation-delay: <%= 0.2 + (index * 0.05) %>s;">
                <td class="px-6 py-4">
                  <span class="inline-flex items-center gap-2 px-3 py-1 text-xs font-medium bg-blue-500/20 text-blue-400 rounded-full border border-blue-500/30">
                    <%= process.kind %>
                  </span>
                </td>
                <td class="px-6 py-4 font-medium"><%= process.name %></td>
                <td class="px-6 py-4 text-muted"><%= process.pid %></td>
                <td class="px-6 py-4 text-muted"><%= process.last_heartbeat_at %></td>
                <td class="px-6 py-4 text-muted"><%= process.supervisor_id %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="fade-in" style="animation-delay: 0.15s;">
    <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-cyan-400">
        <path d="M12 20v-6M6 20V10M18 20V4"></path>
      </svg>
      Recent Jobs
    </h2>
    <div class="card overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-white/10 bg-white/5">
              <th class="px-6 py-4 text-left font-semibold">ID</th>
              <th class="px-6 py-4 text-left font-semibold">Class</th>
              <th class="px-6 py-4 text-left font-semibold">Queue</th>
              <th class="px-6 py-4 text-left font-semibold">Status</th>
              <th class="px-6 py-4 text-left font-semibold">Created At</th>
              <th class="px-6 py-4 text-left font-semibold">Finished At</th>
            </tr>
          </thead>
          <tbody>
            <% @jobs.each_with_index do |job, index| %>
              <tr class="border-b border-white/5 hover:bg-white/5 transition-colors" style="animation-delay: <%= 0.25 + (index * 0.05) %>s;">
                <td class="px-6 py-4 font-mono text-muted"><%= job.id %></td>
                <td class="px-6 py-4 font-medium"><%= job.class_name %></td>
                <td class="px-6 py-4">
                  <span class="inline-flex items-center px-2 py-1 text-xs font-medium bg-purple-500/20 text-purple-400 rounded border border-purple-500/30">
                    <%= job.queue_name %>
                  </span>
                </td>
                <td class="px-6 py-4">
                  <% if job.finished_at.present? %>
                    <span class="inline-flex items-center gap-2 px-3 py-1 text-xs font-medium bg-green-500/20 text-green-400 rounded-full border border-green-500/30">
                      <span class="w-1.5 h-1.5 bg-green-400 rounded-full"></span>
                      Finished
                    </span>
                  <% else %>
                    <span class="inline-flex items-center gap-2 px-3 py-1 text-xs font-medium bg-yellow-500/20 text-yellow-400 rounded-full border border-yellow-500/30">
                      <span class="w-1.5 h-1.5 bg-yellow-400 rounded-full animate-pulse"></span>
                      Pending
                    </span>
                  <% end %>
                </td>
                <td class="px-6 py-4 text-muted"><%= job.created_at %></td>
                <td class="px-6 py-4 text-muted"><%= job.finished_at || '-' %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div class="mb-8">
  <h2 class="text-2xl font-bold mb-4">Failed Jobs</h2>
  <table class="border-collapse border border-gray-300">
    <thead>
      <tr class="bg-gray-100">
        <th class="border border-gray-300 px-4 py-2">Job ID</th>
        <th class="border border-gray-300 px-4 py-2">Class</th>
        <th class="border border-gray-300 px-4 py-2">Error</th>
        <th class="border border-gray-300 px-4 py-2">Failed At</th>
      </tr>
    </thead>
    <tbody>
      <% @failed_jobs.each do |failed| %>
        <tr>
          <td class="border border-gray-300 px-4 py-2"><%= failed.job_id %></td>
          <td class="border border-gray-300 px-4 py-2"><%= failed.job.class_name %></td>
          <td class="border border-gray-300 px-4 py-2"><%= failed.error %></td>
          <td class="border border-gray-300 px-4 py-2"><%= failed.created_at %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
